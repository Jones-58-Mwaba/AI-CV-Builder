<!DOCTYPE html>
<html>
<head>
    <title>Create Your CV - AI CV Builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Light gray background for the entire page */
        body {
            background: #a3a2a2ff;  /* Light gray background */
            min-height: 100vh;
            }

            .container.mt-5.pt-5 {
                                background: #dbd9d9ff;  /* White background for content area */
                                border-radius: 10px;
                                box-shadow: 0 0 20px rgba(0,0,0,0.1);
                                padding: 30px;
                                margin-bottom: 30px;
                            }

        .navbar-custom {
            background-color: #180c24ff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }
        .form-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section-header {
            border-bottom: 2px solid #03070aff;
            padding-bottom: 10px;
            margin-bottom: 20px;
            color: #0b0b0cff;
        }
        .btn-add {
            background: #1d1d1dff;
            color: white;
            border: none;
        }
        .btn-add:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(16, 17, 19, 0.5);
            background: linear-gradient(135deg, #464747ff, #07090aff);
            

        }
        .btn-ai {
            background: #0d0d0eff;
            color: white;
            border: none;
        }
        .btn-ai:hover {
            background: #0e0d0dff;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(71, 71, 71, 0.5);
            background: linear-gradient(135deg, #080808ff, #3b3b3bff);
        }

        /* This is the hover and shodow effect on the save button */
        .save-btn {
              background: linear-gradient(135deg, #070707ff, #494949ff);
              border: none;
              border-radius: 8px;
              transition: all 0.3s ease;
              box-shadow: 0 4px 15px rgba(23, 25, 26, 0.3);
            }

        .save-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(112, 108, 116, 0.5);
                background: linear-gradient(135deg, #0b0c0cff, #394046ff);
            }

            /* This is the hover and shodow effect on the download button*/
        .download-btn {
                background: linear-gradient(135deg, #434344ff, #050408ff);
                border: none;
                border-radius: 8px;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(104, 104, 107, 0.3);
                }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(51, 53, 52, 0.5);
            background: linear-gradient(135deg, #0c0c0cff, #585a59ff);
            }

        /* this is the click effect */
        .save-btn:active, .download-btn:active {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold text-white" href="{% url 'home' %}">
                <i class="fas fa-brain me-2"></i>AI CV Builder
            </a>
            <div class="navbar-nav ms-auto align-items-center">
                <span class="navbar-text text-white me-3">Editing: {{ cv.title }}</span>
                <a class="btn btn-outline-light btn-sm me-2" href="{% url 'dashboard' %}">‚Üê Dashboard</a>
                <a class="btn btn-outline-light btn-sm" href="{% url 'logout' %}">Logout</a>
            </div>
        </div>
    </nav>

    <!-- CV Editor -->
    <div class="container mt-5 pt-5">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">Create Your Professional CV</h1>
                
                <!-- Success Messages -->
                {% if messages %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {% for message in messages %}
                        {{ message }}
                    {% endfor %}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endif %}
               
                
             <form method="POST" action="{% url 'edit_cv' cv.id %}">
                    {% csrf_token %}
                    
                    <!-- Personal Information -->
                    <div class="form-section">
                        <h3 class="section-header">
                            <i class="fas fa-user me-2"></i>Personal Information
                        </h3>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Full Name *</label>
                                <input type="text" class="form-control" name="full_name" value="{{ cv.full_name }}" placeholder="John Doe" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Email *</label>
                                <input type="email" class="form-control" name="email" value="{{ cv.email }}" placeholder="john@example.com" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Phone *</label>
                                <input type="tel" class="form-control" name="phone" value="{{ cv.phone }}" placeholder="+1234567890" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Location *</label>
                                <input type="text" class="form-control" name="location" value="{{ cv.location }}" placeholder="City, Country" required>
                            </div>
                            
                            <!-- Personal Details -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Date of Birth</label>
                                <input type="date" class="form-control" name="date_of_birth" value="{{ cv.date_of_birth|date:'Y-m-d' }}">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Gender</label>
                                <select class="form-select" name="gender">
                                    <option value="">Select Gender</option>
                                    <option value="male" {% if cv.gender == 'male' %}selected{% endif %}>Male</option>
                                    <option value="female" {% if cv.gender == 'female' %}selected{% endif %}>Female</option>
                                    <option value="other" {% if cv.gender == 'other' %}selected{% endif %}>Other</option>
                                    <option value="prefer_not_to_say" {% if cv.gender == 'prefer_not_to_say' %}selected{% endif %}>Prefer not to say</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Nationality</label>
                                <input type="text" class="form-control" name="nationality" value="{{ cv.nationality }}" placeholder="e.g., Zambian">
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Languages</label>
                                <input type="text" class="form-control" name="languages" value="{{ cv.languages }}" placeholder="e.g., English, Bemba, Nyanja">
                                <div class="form-text">Separate languages with commas</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Marital Status</label>
                                <select class="form-select" name="marital_status">
                                    <option value="">Select Status</option>
                                    <option value="single" {% if cv.marital_status == 'single' %}selected{% endif %}>Single</option>
                                    <option value="married" {% if cv.marital_status == 'married' %}selected{% endif %}>Married</option>
                                    <option value="divorced" {% if cv.marital_status == 'divorced' %}selected{% endif %}>Divorced</option>
                                    <option value="widowed" {% if cv.marital_status == 'widowed' %}selected{% endif %}>Widowed</option>
                                </select>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label">LinkedIn Profile</label>
                                <input type="url" class="form-control" name="linkedin" value="{{ cv.linkedin_url }}" placeholder="https://linkedin.com/in/yourprofile">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">GitHub/Portfolio</label>
                                <input type="url" class="form-control" name="portfolio" value="{{ cv.github_url }}" placeholder="https://github.com/yourusername">
                            </div>
                            
                            <div class="col-12 mb-3">
                                <label class="form-label">Professional Summary</label>
                                <textarea class="form-control" name="professional_summary" rows="4" placeholder="Experienced professional with...">{{ cv.professional_summary }}</textarea>
                                <button type="button" class="btn btn-ai btn-sm mt-2">
                                    <i class="fas fa-robot me-1"></i>AI Enhance Summary
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Work Experience -->
                    <div class="form-section">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3 class="section-header mb-0">
                                <i class="fas fa-briefcase me-2"></i>Work Experience
                            </h3>
                            <button type="button" class="btn btn-add" id="add-experience">
                                <i class="fas fa-plus me-1"></i>Add Experience
                            </button>
                        </div>
                        
                        <!-- Experience Forms Container -->
                        <div id="experience-forms">
                            {% for experience in cv.experiences.all %}
                            <div class="experience-form mb-4 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Job Title *</label>
                                        <input type="text" class="form-control" name="experience_job_title" value="{{ experience.job_title }}" placeholder="Software Engineer" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Company *</label>
                                        <input type="text" class="form-control" name="experience_company" value="{{ experience.company }}" placeholder="Tech Company Inc." required>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label">Start Date</label>
                                        <input type="text" class="form-control" name="experience_start_date" value="{{ experience.start_date }}" placeholder="Jan 2020">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label">End Date</label>
                                        <input type="text" class="form-control" name="experience_end_date" value="{{ experience.end_date }}" placeholder="Present">
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" name="experience_description" rows="3" placeholder="Describe your responsibilities and achievements...">{{ experience.description }}</textarea>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label class="form-label">Achievements</label>
                                        <textarea class="form-control" name="experience_achievements" rows="2" placeholder="Key achievements and impacts...">{{ experience.achievements }}</textarea>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-experience">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% empty %}
                            <!-- Empty template for new experiences -->
                            <div class="experience-form mb-4 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Job Title *</label>
                                        <input type="text" class="form-control" name="experience_job_title" placeholder="Software Engineer" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Company *</label>
                                        <input type="text" class="form-control" name="experience_company" placeholder="Tech Company Inc." required>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label">Start Date</label>
                                        <input type="text" class="form-control" name="experience_start_date" placeholder="Jan 2020">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label">End Date</label>
                                        <input type="text" class="form-control" name="experience_end_date" placeholder="Present">
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" name="experience_description" rows="3" placeholder="Describe your responsibilities and achievements..."></textarea>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label class="form-label">Achievements</label>
                                        <textarea class="form-control" name="experience_achievements" rows="2" placeholder="Key achievements and impacts..."></textarea>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-experience">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Education -->
                    <div class="form-section">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3 class="section-header mb-0">
                                <i class="fas fa-graduation-cap me-2"></i>Education
                            </h3>
                            <button type="button" class="btn btn-add" id="add-education">
                                <i class="fas fa-plus me-1"></i>Add Education
                            </button>
                        </div>
                        
                        <!-- Education Forms Container -->
                        <div id="education-forms">
                            {% for education in cv.educations.all %}
                            <div class="education-form mb-4 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Institution *</label>
                                        <input type="text" class="form-control" name="education_institution" value="{{ education.institution }}" placeholder="University Name" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Degree *</label>
                                        <input type="text" class="form-control" name="education_degree" value="{{ education.degree }}" placeholder="Bachelor of Science" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Field of Study</label>
                                        <input type="text" class="form-control" name="education_field_of_study" value="{{ education.field_of_study }}" placeholder="Computer Science">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label">Start Date</label>
                                        <input type="text" class="form-control" name="education_start_date" value="{{ education.start_date }}" placeholder="Aug 2018">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label">End Date</label>
                                        <input type="text" class="form-control" name="education_end_date" value="{{ education.end_date }}" placeholder="May 2022">
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" name="education_description" rows="2" placeholder="Relevant coursework, achievements, honors...">{{ education.description }}</textarea>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-education">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% empty %}
                            <!-- Empty template for new education -->
                            <div class="education-form mb-4 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Institution *</label>
                                        <input type="text" class="form-control" name="education_institution" placeholder="University Name" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Degree *</label>
                                        <input type="text" class="form-control" name="education_degree" placeholder="Bachelor of Science" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Field of Study</label>
                                        <input type="text" class="form-control" name="education_field_of_study" placeholder="Computer Science">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label">Start Date</label>
                                        <input type="text" class="form-control" name="education_start_date" placeholder="Aug 2018">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label">End Date</label>
                                        <input type="text" class="form-control" name="education_end_date" placeholder="May 2022">
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" name="education_description" rows="2" placeholder="Relevant coursework, achievements, honors..."></textarea>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-education">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Skills -->
                    <div class="form-section">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3 class="section-header mb-0">
                                <i class="fas fa-tools me-2"></i>Skills
                            </h3>
                            <div>
                                <button type="button" class="btn btn-ai btn-sm me-2" id="ai-suggest-skills">
                                    <i class="fas fa-robot me-1"></i>AI Suggest Skills
                                </button>
                                <button type="button" class="btn btn-add btn-sm" id="add-skill">
                                    <i class="fas fa-plus me-1"></i>Add Skill
                                </button>
                            </div>
                        </div>
                        
                        <!-- Skills Forms Container -->
                        <div id="skills-forms">
                            {% for skill in cv.skills.all %}
                            <div class="skill-form mb-3 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Skill Name *</label>
                                        <input type="text" class="form-control" name="skill_name" value="{{ skill.name }}" placeholder="e.g., Python, Project Management" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Category *</label>
                                        <select class="form-select" name="skill_category" required>
                                            <option value="technical" {% if skill.category == 'technical' %}selected{% endif %}>Technical Skills</option>
                                            <option value="soft" {% if skill.category == 'soft' %}selected{% endif %}>Soft Skills</option>
                                            <option value="languages" {% if skill.category == 'languages' %}selected{% endif %}>Languages</option>
                                            <option value="tools" {% if skill.category == 'tools' %}selected{% endif %}>Tools & Technologies</option>
                                        </select>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-skill">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% empty %}
                            <!-- Empty template for new skills -->
                            <div class="skill-form mb-3 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Skill Name *</label>
                                        <input type="text" class="form-control" name="skill_name" placeholder="e.g., Python, Project Management" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Category *</label>
                                        <select class="form-select" name="skill_category" required>
                                            <option value="technical">Technical Skills</option>
                                            <option value="soft">Soft Skills</option>
                                            <option value="languages">Languages</option>
                                            <option value="tools">Tools & Technologies</option>
                                        </select>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-skill">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                     <!-- Projects -->
<div class="form-section">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="section-header mb-0">
            <i class="fas fa-code me-2"></i>Projects
        </h3>
        <button type="button" class="btn btn-add" id="add-project">
            <i class="fas fa-plus me-1"></i>Add Project
        </button>
    </div>
    
    <!-- Projects Forms Container -->
    <div id="projects-forms">
        {% for project in cv.projects.all %}
        <div class="project-form mb-4 p-3 border rounded">
            <div class="row">
                <div class="col-12 mb-3">
                    <label class="form-label">Project Name *</label>
                    <input type="text" class="form-control" name="project_name" value="{{ project.name }}" placeholder="E-commerce Website" required>
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Technologies Used</label>
                    <input type="text" class="form-control" name="project_technologies" value="{{ project.technologies }}" placeholder="React, Node.js, MongoDB">
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Project URL</label>
                    <input type="url" class="form-control" name="project_url" value="{{ project.project_url }}" placeholder="https://github.com/yourusername/project">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Start Date</label>
                    <input type="text" class="form-control" name="project_start_date" value="{{ project.start_date }}" placeholder="Jan 2023">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">End Date</label>
                    <input type="text" class="form-control" name="project_end_date" value="{{ project.end_date }}" placeholder="Mar 2023">
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" name="project_description" rows="3" placeholder="Describe the project, your role, and outcomes...">{{ project.description }}</textarea>
                    <button type="button" class="btn btn-ai btn-sm mt-2">
                        <i class="fas fa-robot me-1"></i>AI Enhance Description
                    </button>
                </div>
                <div class="col-12 text-end">
                    <button type="button" class="btn btn-danger btn-sm remove-project">
                        <i class="fas fa-trash me-1"></i>Remove
                    </button>
                </div>
            </div>
        </div>
        {% empty %}
        <!-- Empty template for new projects -->
        <div class="project-form mb-4 p-3 border rounded">
            <div class="row">
                <div class="col-12 mb-3">
                    <label class="form-label">Project Name *</label>
                    <input type="text" class="form-control" name="project_name" placeholder="E-commerce Website" required>
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Technologies Used</label>
                    <input type="text" class="form-control" name="project_technologies" placeholder="React, Node.js, MongoDB">
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Project URL</label>
                    <input type="url" class="form-control" name="project_url" placeholder="https://github.com/yourusername/project">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Start Date</label>
                    <input type="text" class="form-control" name="project_start_date" placeholder="Jan 2023">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">End Date</label>
                    <input type="text" class="form-control" name="project_end_date" placeholder="Mar 2023">
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" name="project_description" rows="3" placeholder="Describe the project, your role, and outcomes..."></textarea>
                    <button type="button" class="btn btn-ai btn-sm mt-2">
                        <i class="fas fa-robot me-1"></i>AI Enhance Description
                    </button>
                </div>
                <div class="col-12 text-end">
                    <button type="button" class="btn btn-danger btn-sm remove-project">
                        <i class="fas fa-trash me-1"></i>Remove
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
             <!-- Certifications Section-->
<div class="form-section">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="section-header mb-0">
            <i class="fas fa-trophy me-2"></i>Certifications
        </h3>
        <button type="button" class="btn btn-add" id="add-certification">
            <i class="fas fa-plus me-1"></i>Add Certification
        </button>
    </div>
    
    <!-- Certifications Forms Container -->
    <div id="certifications-forms">
        {% for certification in cv.certifications.all %}
        <div class="certification-form mb-4 p-3 border rounded">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Certification/Award Name *</label>
                    <input type="text" class="form-control" name="certification_name" value="{{ certification.name }}" placeholder="AWS Certified Developer" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Issuing Organization *</label>
                    <input type="text" class="form-control" name="certification_organization" value="{{ certification.issuing_organization }}" placeholder="Amazon Web Services" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Date Earned</label>
                    <input type="text" class="form-control" name="certification_issue_date" value="{{ certification.issue_date }}" placeholder="Jan 2023">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Expiry Date</label>
                    <input type="text" class="form-control" name="certification_expiry_date" value="{{ certification.expiry_date }}" placeholder="Jan 2026">
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Credential URL</label>
                    <input type="url" class="form-control" name="certification_url" value="{{ certification.credential_url }}" placeholder="https://example.com/certificate">
                </div>
                <div class="col-12 text-end">
                    <button type="button" class="btn btn-danger btn-sm remove-certification">
                        <i class="fas fa-trash me-1"></i>Remove
                    </button>
                </div>
            </div>
        </div>
        {% empty %}
        <!-- Empty template for new certifications -->
        <div class="certification-form mb-4 p-3 border rounded">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Certification/Award Name *</label>
                    <input type="text" class="form-control" name="certification_name" placeholder="AWS Certified Developer" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Issuing Organization *</label>
                    <input type="text" class="form-control" name="certification_organization" placeholder="Amazon Web Services" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Date Earned</label>
                    <input type="text" class="form-control" name="certification_issue_date" placeholder="Jan 2023">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Expiry Date</label>
                    <input type="text" class="form-control" name="certification_expiry_date" placeholder="Jan 2026">
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Credential URL</label>
                    <input type="url" class="form-control" name="certification_url" placeholder="https://example.com/certificate">
                </div>
                <div class="col-12 text-end">
                    <button type="button" class="btn btn-danger btn-sm remove-certification">
                        <i class="fas fa-trash me-1"></i>Remove
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>     
                <!-- Achievements -->
                    <div class="form-section">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3 class="section-header mb-0">
                                <i class="fas fa-award me-2"></i>Achievements & Awards
                            </h3>
                            <button type="button" class="btn btn-add" id="add-achievement">
                                <i class="fas fa-plus me-1"></i>Add Achievement
                            </button>
                        </div>
                        
                        <!-- Achievements Forms Container -->
                        <div id="achievements-forms">
                            {% for achievement in cv.achievements.all %}
                            <div class="achievement-form mb-4 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Achievement/Award Title *</label>
                                        <input type="text" class="form-control" name="achievement_title" value="{{ achievement.title }}" placeholder="Employee of the Year" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Issuing Organization</label>
                                        <input type="text" class="form-control" name="achievement_organization" value="{{ achievement.issuing_organization }}" placeholder="Company Name">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Date Received</label>
                                        <input type="text" class="form-control" name="achievement_date" value="{{ achievement.date }}" placeholder="Dec 2023">
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" name="achievement_description" rows="3" placeholder="Describe the achievement, criteria, and significance...">{{ achievement.description }}</textarea>
                                        <button type="button" class="btn btn-ai btn-sm mt-2">
                                            <i class="fas fa-robot me-1"></i>AI Enhance Description
                                        </button>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-achievement">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% empty %}
                            <!-- Empty template for new achievements -->
                            <div class="achievement-form mb-4 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Achievement/Award Title *</label>
                                        <input type="text" class="form-control" name="achievement_title" placeholder="Employee of the Year" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Issuing Organization</label>
                                        <input type="text" class="form-control" name="achievement_organization" placeholder="Company Name">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Date Received</label>
                                        <input type="text" class="form-control" name="achievement_date" placeholder="Dec 2023">
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" name="achievement_description" rows="3" placeholder="Describe the achievement, criteria, and significance..."></textarea>
                                        <button type="button" class="btn btn-ai btn-sm mt-2">
                                            <i class="fas fa-robot me-1"></i>AI Enhance Description
                                        </button>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-achievement">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                   <!-- References -->
                    <div class="form-section">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3 class="section-header mb-0">
                                <i class="fas fa-users me-2"></i>References
                            </h3>
                            <button type="button" class="btn btn-add" id="add-reference">
                                <i class="fas fa-plus me-1"></i>Add Reference
                            </button>
                        </div>
                        
                        <!-- References Forms Container -->
                        <div id="references-forms">
                            {% for reference in cv.references.all %}
                            <div class="reference-form mb-4 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Reference Name</label>
                                        <input type="text" class="form-control" name="reference_name" value="{{ reference.name }}" placeholder="Dr. Someone Buntu">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Position</label>
                                        <input type="text" class="form-control" name="reference_position" value="{{ reference.position }}" placeholder="Professor of Marketing">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Company/Institution</label>
                                        <input type="text" class="form-control" name="reference_company" value="{{ reference.company }}" placeholder="University of Zambia">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" name="reference_email" value="{{ reference.email }}" placeholder="someone.buntu@unza.zm">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Phone</label>
                                        <input type="tel" class="form-control" name="reference_phone" value="{{ reference.phone }}" placeholder="+260 123 456 789">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Relationship</label>
                                        <input type="text" class="form-control" name="reference_relationship" value="{{ reference.relationship }}" placeholder="Former Professor, Supervisor, etc.">
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-reference">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% empty %}
                            <!-- Empty template for new references -->
                            <div class="reference-form mb-4 p-3 border rounded">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Reference Name</label>
                                        <input type="text" class="form-control" name="reference_name" placeholder="Dr. Someone Buntu">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Position</label>
                                        <input type="text" class="form-control" name="reference_position" placeholder="Professor of Marketing">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Company/Institution</label>
                                        <input type="text" class="form-control" name="reference_company" placeholder="University of Zambia">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" name="reference_email" placeholder="someone.buntu@unza.zm">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Phone</label>
                                        <input type="tel" class="form-control" name="reference_phone" placeholder="+260 123 456 789">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Relationship</label>
                                        <input type="text" class="form-control" name="reference_relationship" placeholder="Former Professor, Supervisor, etc.">
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="button" class="btn btn-danger btn-sm remove-reference">
                                            <i class="fas fa-trash me-1"></i>Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>

                        <!-- Option for "Available upon request" -->
                        <div class="form-check mt-3">
                            <input class="form-check-input" type="checkbox" id="available_upon_request" name="available_upon_request">
                            <label class="form-check-label" for="available_upon_request">
                                <strong>Available upon request</strong> - Include this standard phrase instead of detailed references
                            </label>
                        </div>
                    </div>
                        
                    
                  <!-- Action Buttons -->
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-primary btn-lg px-5 me-3 save-btn">
                            <i class="fas fa-save me-2"></i>Save CV
                        </button>
                        <a href="{% url 'download_cv_pdf' cv.id %}" class="btn btn-success btn-lg px-5 download-btn">
                            <i class="fas fa-download me-2"></i>Download PDF
                        </a>
                    </div>
                    </div>
                </form> 
                <!-- End of form -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>

    // ========== ALL DYNAMIC FORM BUTTONS ==========
    
    // Work Experience
    document.getElementById('add-experience').addEventListener('click', function() {
        const container = document.getElementById('experience-forms');
        const newForm = container.firstElementChild.cloneNode(true);
        container.appendChild(newForm);
    });

    // Education
    document.getElementById('add-education').addEventListener('click', function() {
        const container = document.getElementById('education-forms');
        const newForm = container.firstElementChild.cloneNode(true);
        container.appendChild(newForm);
    });

    // Skills
    document.getElementById('add-skill').addEventListener('click', function() {
        const container = document.getElementById('skills-forms');
        const newForm = container.firstElementChild.cloneNode(true);
        container.appendChild(newForm);
    });

    // Projects
    document.getElementById('add-project').addEventListener('click', function() {
        const container = document.getElementById('projects-forms');
        const newForm = container.firstElementChild.cloneNode(true);
        container.appendChild(newForm);
    });

    // Certifications
    document.getElementById('add-certification').addEventListener('click', function() {
        const container = document.getElementById('certifications-forms');
        const newForm = container.firstElementChild.cloneNode(true);
        container.appendChild(newForm);
    });

    // Achievements
    document.getElementById('add-achievement').addEventListener('click', function() {
        const container = document.getElementById('achievements-forms');
        const newForm = container.firstElementChild.cloneNode(true);
        container.appendChild(newForm);
    });

    // References
    document.getElementById('add-reference').addEventListener('click', function() {
        const container = document.getElementById('references-forms');
        const newForm = container.firstElementChild.cloneNode(true);
        container.appendChild(newForm);
    });

    // ========== REMOVE BUTTON HANDLERS ==========
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('remove-experience')) {
            const form = e.target.closest('.experience-form');
            if (document.querySelectorAll('.experience-form').length > 1) form.remove();
        }
        if (e.target.classList.contains('remove-education')) {
            const form = e.target.closest('.education-form');
            if (document.querySelectorAll('.education-form').length > 1) form.remove();
        }
        if (e.target.classList.contains('remove-skill')) {
            const form = e.target.closest('.skill-form');
            if (document.querySelectorAll('.skill-form').length > 1) form.remove();
        }
        if (e.target.classList.contains('remove-project')) {
            const form = e.target.closest('.project-form');
            if (document.querySelectorAll('.project-form').length > 1) form.remove();
        }
        if (e.target.classList.contains('remove-certification')) {
            const form = e.target.closest('.certification-form');
            if (document.querySelectorAll('.certification-form').length > 1) form.remove();
        }
        if (e.target.classList.contains('remove-achievement')) {
            const form = e.target.closest('.achievement-form');
            if (document.querySelectorAll('.achievement-form').length > 1) form.remove();
        }
        if (e.target.classList.contains('remove-reference')) {
            const form = e.target.closest('.reference-form');
            if (document.querySelectorAll('.reference-form').length > 1) form.remove();
        }
    });

</script>
</body>
</html>

